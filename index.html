<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>LA MUNDO DOS SABORES ü¶Å</title>

  <!--
    Destaques:
      - Mantidas todas as funcionalidades existentes (pizzas meio a meio, combos, carrinho, etc.).
      - Campo de busca funciona em todas as categorias.
      - Nova op√ß√£o ‚ÄúPromo√ß√£o da Noite‚Äù no menu inicial, exibindo uma tela semelhante √† de combos.
      - Imagens de promo√ß√µes v√™m da pasta "imagens_promocao".
      - Responsividade para dispositivos m√≥veis permanece inalterada.
  -->

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: Arial, sans-serif;
    }

    body {
      background-color: #000000;
      color: #ff0000;
    }

    header {
      background-color: #000000;
      padding: 20px;
      text-align: center;
      color: rgb(255, 251, 0);
      font-size: 1.8em;
      font-weight: bold;
      position: relative;
      z-index: 10;
    }

    /* Container p/ slideshow e bot√µes iniciais */
    #menuInicialContainer {
      position: relative;
      width: 100%;
      min-height: 80vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      overflow: hidden;
    }

    /* Slideshow de fundo (menos zoom) */
    #menuInicialSlideshow {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-repeat: no-repeat;
      background-size: cover; /* Alterado de 'contain' para 'cover' */
      background-position: center;
      transition: background-image 1s ease-in-out;
      z-index: 1;
    }

    /* Menu Inicial (bot√µes) */
    #menuInicial {
      position: relative;
      z-index: 2;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 15px;
      margin: 30px 0;
    }

    button {
      padding: 15px 25px;
      font-size: 1.1em;
      border: none;
      border-radius: 10px;
      background-color: #ffee00;
      color: #000;
      cursor: pointer;
      width: 100%;
      max-width: 300px;
      transition: background 0.3s;
      white-space: nowrap;
      text-align: center;
    }
    button:disabled {
      background-color: #969696;
      cursor: not-allowed;
    }
    button:hover {
      background-color: #ffee00;
    }

    .tela {
      display: none;
      padding: 20px;
      text-align: center;
    }
    .active {
      display: block;
    }

    .categorias, .subcategorias {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
    }
    .categorias button, .subcategorias button {
      background-color: #f70000;
      color: rgb(255, 255, 255);
    }

    /* Tela de Produtos */
    #produtos {
      max-width: 500px;
      margin: 0 auto;
    }

    #busca {
      width: 90%;
      padding: 10px;
      margin-bottom: 15px;
      border: 2px solid #f70000;
      border-radius: 8px;
      font-size: 1em;
    }

    .produto {
      background: white;
      border-radius: 10px;
      padding: 15px;
      margin: 10px 0;
      text-align: left;
      box-shadow: 0 0 8px rgba(255, 255, 255, 0.555);
      cursor: pointer;
    }
    .produto h3 {
      color: #000000;
      margin-bottom: 5px;
    }
    .produto p {
      color: #000000;
      margin-bottom: 5px;
    }
    .produto .preco {
      color: #ff0000;
      font-weight: bold;
      float: right;
    }

    /* Tela de Combos/Promo√ß√µes (layout similar) */
    #combosLista, #promocoesLista {
      max-width: 500px;
      margin: 0 auto;
    }
    .combo-item {
      background: white;
      border-radius: 10px;
      padding: 15px;
      margin: 10px 0;
      box-shadow: 0 0 8px rgba(255, 255, 255, 0.445);
      text-align: left;
      cursor: pointer;
    }
    .combo-item img {
      width: 100%;
      max-width: 250px;
      display: block;
      margin-bottom: 10px;
      margin: 0 auto 10px;
      border-radius: 8px;
    }
    .combo-item h3 {
      color: #000000;
      margin-bottom: 5px;
    }
    .combo-item p {
      margin-bottom: 5px;
    }

    /* Tela de Detalhes */
    #detalhes {
      max-width: 500px;
      margin: 0 auto;
      text-align: left;
    }
    #detalhes .detalhes-container {
      background: white;
      border-radius: 10px;
      padding: 15px;
      box-shadow: 0 0 8px rgba(0,0,0,0.1);
    }
    #detalhes h2 {
      margin-bottom: 10px;
      color: #000000;
      text-align: center;
    }
    .quantidade {
      display: flex;
      align-items: center;
      margin-top: 10px;
      margin-bottom: 10px;
    }
    .quantidade button {
      background-color: #ffee00;
      margin: 0 10px;
      width: 40px;
    }
    .quantidade span {
      font-size: 1.2em;
      width: 30px;
      text-align: center;
    }
    .opcoes {
      margin-top: 10px;
      margin-bottom: 10px;
    }
    .opcoes label {
      margin-right: 10px;
    }
    .observacao {
      width: 100%;
      height: 60px;
      resize: none;
      margin-bottom: 10px;
      border-radius: 8px;
      border: 2px solid #000000;
      padding: 8px;
      font-size: 1em;
    }
    .total {
      font-size: 1.2em;
      color: #ff0000;
      font-weight: bold;
      text-align: right;
      margin-bottom: 15px;
    }

    /* Tela de Pedidos */
    #pedidos {
      max-width: 500px;
      margin: 0 auto;
      text-align: left;
    }
    .pedido-item {
      background: white;
      border-radius: 10px;
      padding: 15px;
      margin: 10px 0;
      box-shadow: 0 0 8px rgba(0,0,0,0.1);
      position: relative;
    }
    .pedido-item h4 {
      color: #000000;
      margin-bottom: 5px;
    }
    .pedido-total {
      margin-top: 15px;
      font-size: 1.2em;
      font-weight: bold;
      text-align: right;
      color: #fbff00;
    }
    .botoes-pedidos {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 15px;
      margin-top: 20px;
    }

    /* Entrega: local e endere√ßo */
    .entrega-opcoes {
      margin-top: 15px;
      text-align: left;
    }
    .entrega-opcoes label {
      margin-right: 10px;
    }
    #enderecoEntrega {
      width: 100%;
      max-width: 400px;
      padding: 8px;
      font-size: 1em;
      border: 2px solid #000000;
      border-radius: 8px;
      margin-top: 8px;
    }
  </style>
</head>
<body>
  <header>LA MUNDO DOS SABORES ü¶Å</header>

  <div id="menuInicialContainer">
    <!-- Slideshow de fundo -->
    <div id="menuInicialSlideshow"></div>

    <!-- Menu Inicial -->
    <nav id="menuInicial">
      <button onclick="mostrarTela('cardapio')">Card√°pio</button>
      <button onclick="mostrarCombos()">Combos da Noite</button>
      <!-- NOVO BOT√ÉO: Promo√ß√£o da Noite -->
      <button onclick="mostrarPromocoes()">Promo√ß√£o da Noite</button>
      <button onclick="mostrarTela('pedidos')">Ver Pedidos</button>
      <button onclick="mostrarTela('informacoes')">Informa√ß√µes</button>
    </nav>
  </div>

  <!-- Tela de Categorias (Card√°pio) -->
  <div id="cardapio" class="tela">
    <div class="categorias">
      <h2>Escolha uma categoria:</h2>
      <button onclick="mostrarSubcategorias('Pizzas Grandes')">Pizzas Grandes</button>
      <button onclick="mostrarSubcategorias('Pizzas Pequenas')">Pizzas Pequenas</button>
      <button onclick="mostrarProdutosGenerico('Hamb√∫rgueres')">Hamb√∫rgueres</button>
      <button onclick="mostrarProdutosGenerico('Past√©is')">Past√©is</button>
      <button onclick="mostrarProdutosGenerico('Esfirras')">Esfirras</button>
      <button onclick="mostrarProdutosGenerico('A√ßa√≠')">A√ßa√≠</button>
      <button onclick="mostrarProdutosGenerico('Gelados')">Gelados</button>
      <button onclick="mostrarProdutosGenerico('Refrigerantes')">Refrigerantes</button>
      <button onclick="mostrarProdutosGenerico('Batata Frita')">Batata Frita</button>
      <button onclick="voltarMenu()">Voltar</button>
    </div>
  </div>

  <!-- Tela de Combos -->
  <div id="combos" class="tela">
    <h2>Combos da Noite</h2>
    <div id="combosLista"></div>
    <br>
    <button onclick="voltarMenu()">Voltar</button>
  </div>

  <!-- NOVA TELA: Promo√ß√µes da Noite -->
  <div id="promocoes" class="tela">
    <h2>Promo√ß√£o da Noite</h2>
    <div id="promocoesLista"></div>
    <br>
    <button onclick="voltarMenu()">Voltar</button>
  </div>

  <!-- Tela de Subcategorias (Grandes ou Pequenas) -->
  <div id="subcategorias" class="tela">
    <div class="subcategorias">
      <h2 id="tituloSubcategoria"></h2>
      <button onclick="mostrarProdutosPizzas('Tradicionais')">Tradicionais</button>
      <button onclick="mostrarProdutosPizzas('Doces')">Doces</button>
      <button onclick="mostrarProdutosPizzas('Premium Doces')">Premium Doces</button>
      <button onclick="mostrarProdutosPizzas('Premium Salgadas')">Premium Salgadas</button>
      <button onclick="mostrarTela('cardapio')">Voltar</button>
    </div>
  </div>

  <!-- Tela de Produtos -->
  <div id="produtos" class="tela">
    <h2 id="tituloCategoria"></h2>
    <input type="text" id="busca" placeholder="Buscar por nome..." oninput="filtrarProdutos()"/>
    <div id="listaProdutos"></div>
    <br>
    <button onclick="mostrarTela('cardapio')">Voltar √†s Categorias</button>
  </div>

  <!-- Tela de Detalhes do Produto -->
  <div id="detalhes" class="tela">
    <div class="detalhes-container">
      <h2 id="detalhesTitulo"></h2>
      <p id="detalhesDescricao"></p>
      <div class="quantidade">
        <label>Quantidade:</label>
        <button onclick="alterarQuantidade(-1)">-</button>
        <span id="quantidadeValor">1</span>
        <button onclick="alterarQuantidade(1)">+</button>
      </div>
      <div class="opcoes">
        <label>
          <input type="radio" name="opcaoPizza" value="Inteira" checked onchange="mudarTipoPizza()"/>
          Inteira
        </label>
        <label>
          <input type="radio" name="opcaoPizza" value="Meio a Meio" onchange="mudarTipoPizza()"/>
          Meio a Meio
        </label>
      </div>
      <textarea class="observacao" id="observacao" placeholder="Alguma observa√ß√£o?"></textarea>
      <div class="total" id="precoTotal"></div>
      <button id="botaoAcao" onclick="acaoDetalhes()">Adicionar ao Pedido</button>
    </div>
    <br>
    <button onclick="mostrarTela('produtos')">Voltar</button>
  </div>

  <!-- Tela de Pedidos -->
  <div id="pedidos" class="tela">
    <h2>Seus pedidos</h2>
    <div id="listaPedidos"></div>
    <div class="pedido-total" id="pedidoTotal"></div>

    <!-- Op√ß√µes de local de entrega + endere√ßo -->
    <div class="entrega-opcoes">
      <p><strong>Endere√ßo:</strong></p>
      <label>
        <input type="radio" name="localEntrega" value="Vila Neves" onchange="atualizarEntrega()"/>
        Vila Neves
      </label>
      <label>
        <input type="radio" name="localEntrega" value="Sitio" onchange="atualizarEntrega()"/>
        Sitio
      </label>
      <br><br>
      <label for="enderecoEntrega">Local:</label>
      <br>
      <input type="text" id="enderecoEntrega" oninput="atualizarEntrega()" placeholder="Digite aqui..."/>
    </div>

    <div class="botoes-pedidos">
      <button onclick="adicionarMais()">Adicionar Mais</button>
      <button id="botaoEnviar" onclick="enviarPedido()" disabled>Enviar Pedido</button>
      <button onclick="voltarMenu()">Voltar</button>
    </div>
  </div>

  <!-- Tela de Informa√ß√µes -->
  <div id="informacoes" class="tela">
    <h1>Informa√ß√µes</h1>
    <br>
    <p>Rua jos√© Prot√°zio Burgos, 50 - jucati Vila Neves</p>
    <br>
    <p>Telefone: (87) 98129-5167</p>
    <br>
    <h2>Hor√°rio de funcionamento: </h2>
      <br>
      <p>Segunda √† Sexta 18h as 23h 
      <br>
      <br>
      Final de semana 18h √†s 00:00h</p>
      <br>
    <p>Fazemos entregas nos S√≠tios Vizinhos</p>
    <br>
    <button onclick="voltarMenu()">Voltar</button>
  </div>

  <script>
    /* ============= S L I D E S H O W ============= */
    const imagensFundo = [
      'imagens_inicial/pizza1.jpg',
      'imagens_inicial/pizza2.jpg',
      'imagens_inicial/pizza3.jpg'
    ];
    let indexFundo = 0;
    const slideshowElement = document.getElementById('menuInicialSlideshow');

    function trocarImagemFundo() {
      slideshowElement.style.backgroundImage = `url(${imagensFundo[indexFundo]})`;
      indexFundo = (indexFundo + 1) % imagensFundo.length;
    }
    setInterval(trocarImagemFundo, 4000);
    trocarImagemFundo();

    function mostrarTela(id) {
      const telas = document.querySelectorAll('.tela');
      telas.forEach(t => t.classList.remove('active'));
      const alvo = document.getElementById(id);
      if (alvo) alvo.classList.add('active');

      if (id !== 'menuInicial') {
        document.getElementById('menuInicialContainer').style.display = 'none';
      } else {
        document.getElementById('menuInicialContainer').style.display = 'block';
      }
    }

    function voltarMenu() {
      const telas = document.querySelectorAll('.tela');
      telas.forEach(t => t.classList.remove('active'));
      document.getElementById('menuInicialContainer').style.display = 'block';
    }

    function voltarParaProdutos() {
      mostrarTela('produtos');
    }

    /* =========== L √ì G I C A  /  C A R R I N H O ========== */
    let carrinho = [];
    let produtoSelecionado = null;
    let quantidadeSelecionada = 1;
    let precoBase = 0;
    let subcategoriaAtual = '';
    let tipoPizzaAtual = ''; // 'grande', 'pequena' ou 'outros'
    let isSelecionandoSegundaMetade = false;
    let primeiraMetade = null;

    // Entrega
    let localEntrega = '';
    let enderecoEntrega = '';

    // ====================== COMBOS =========================
    const combosNoite = [
      {
        codigo: 'CB01',
        nome: 'Combo 1',
        preco: 59.90,
        desc: 'Pizza M√©dia + 2 Refri Lata + A√ßa√≠ 300ml',
        imagem: 'imagens_combo/combo1.jpg'
      },
      {
        codigo: 'CB02',
        nome: 'Combo 2',
        preco: 79.90,
        desc: 'Pizza Grande + Refrigerante 2L + 2 Past√©is',
        imagem: 'imagens_combo/combo2.jpg'
      }
    ];

    // ================== PROMO√á√ïES DA NOITE =================
    /* Exemplo de array com promo√ß√µes e suas imagens
       (pasta "imagens_promocao") */
    const promocoesNoite = [
      {
        codigo: 'PR01',
        nome: 'Promo√ß√£o 1',
        preco: 29.90,
        desc: 'Pizza Pequena + 1 Refri Lata',
        imagem: 'imagens_promocao/promo1.jpg'
      },
      {
        codigo: 'PR02',
        nome: 'Promo√ß√£o 2',
        preco: 39.90,
        desc: '2 Past√©is + 1 Suco',
        imagem: 'imagens_promocao/promo2.jpg'
      }
    ];

    /* Fun√ß√£o para exibir combos */
    function mostrarCombos() {
      mostrarTela('combos');
      const combosLista = document.getElementById('combosLista');
      combosLista.innerHTML = '';

      combosNoite.forEach(combo => {
        const div = document.createElement('div');
        div.classList.add('combo-item');
        div.onclick = () => comboClicado(combo);

        div.innerHTML = `
          <img src="${combo.imagem}" alt="${combo.nome}" />
          <h3>${combo.codigo} ${combo.nome}</h3>
          <p>${combo.desc}</p>
          <p class="preco">R$ ${combo.preco.toFixed(2)}</p>
        `;
        combosLista.appendChild(div);
      });
    }

    function comboClicado(combo) {
      produtoSelecionado = combo;
      quantidadeSelecionada = 1;
      precoBase = combo.preco;

      document.getElementById('detalhesTitulo').innerText = `${combo.codigo} ${combo.nome}`;
      document.getElementById('detalhesDescricao').innerText = combo.desc;
      document.getElementById('quantidadeValor').innerText = '1';
      document.getElementById('observacao').value = '';

      // Oculta op√ß√µes de pizza
      document.querySelector('.opcoes').style.display = 'none';
      atualizarTotal();

      document.getElementById('botaoAcao').textContent = 'Adicionar ao Pedido';
      mostrarTela('detalhes');
    }

    /* Fun√ß√£o para exibir promo√ß√µes */
    function mostrarPromocoes() {
      mostrarTela('promocoes');
      const promocoesLista = document.getElementById('promocoesLista');
      promocoesLista.innerHTML = '';

      promocoesNoite.forEach(promo => {
        const div = document.createElement('div');
        div.classList.add('combo-item');
        div.onclick = () => promocaoClicada(promo);

        div.innerHTML = `
          <img src="${promo.imagem}" alt="${promo.nome}" />
          <h3>${promo.codigo} ${promo.nome}</h3>
          <p>${promo.desc}</p>
          <p class="preco">R$ ${promo.preco.toFixed(2)}</p>
        `;
        promocoesLista.appendChild(div);
      });
    }

    function promocaoClicada(promo) {
      produtoSelecionado = promo;
      quantidadeSelecionada = 1;
      precoBase = promo.preco;

      document.getElementById('detalhesTitulo').innerText = `${promo.codigo} ${promo.nome}`;
      document.getElementById('detalhesDescricao').innerText = promo.desc;
      document.getElementById('quantidadeValor').innerText = '1';
      document.getElementById('observacao').value = '';

      // Oculta op√ß√µes de pizza
      document.querySelector('.opcoes').style.display = 'none';
      atualizarTotal();

      document.getElementById('botaoAcao').textContent = 'Adicionar ao Pedido';
      mostrarTela('detalhes');
    }

    // Pizzas Grandes (separadas por subcategorias)
    const pizzasGrandes = {
      'Tradicionais': [
        { codigo: 'T001', nome: 'A Moda do Chefe (G)', preco: 38.00, desc: 'Frango desfiado, palmito, ovos, bacon, catupiry' },
        { codigo: 'T002', nome: 'Atum (G)', preco: 36.00, desc: 'Atum, mussarela, cebola, or√©gano' },
        { codigo: 'T003', nome: 'Bacon (G)', preco: 36.00, desc: 'Molho de tomate, mussarela, bacon, ovos, tomate' },
        { codigo: 'T004', nome: 'Baiana (G)', preco: 35.00, desc: 'Molho de tomate, calabresa, ovos, cebola, mussarela, pimenta' },
        { codigo: 'T005', nome: 'Brasileira Pizza (G)', preco: 36.00, desc: 'Mussarela, presunto, milho, ervilha, tomate' },
        { codigo: 'T006', nome: 'Calabresa (G)', preco: 35.00, desc: 'Molho de tomate, calabresa, cebola' },
        { codigo: 'T007', nome: 'Calabresa 3 Queijos (G)', preco: 40.00, desc: 'Molho de tomate, calabresa, mussarela, catupiry, cheddar' },
        { codigo: 'T008', nome: 'Caipira (G)', preco: 38.00, desc: 'Molho de tomate, mussarela, frango desfiado, cebola, milho, tomate, bacon' },
        { codigo: 'T009', nome: 'Charque (G)', preco: 40.00, desc: 'Molho de tomate, mussarela, charque, tomate, azeitona' },
        { codigo: 'T010', nome: 'Dois Queijos (G)', preco: 35.00, desc: 'Molho de tomate, mussarela, catupiry' },
        { codigo: 'T011', nome: 'Tr√™s Queijos (G)', preco: 36.00, desc: 'Molho de tomate, mussarela, catupiry, parmes√£o' },
        { codigo: 'T012', nome: 'Quatro Queijos (G)', preco: 37.00, desc: 'Molho de tomate, mussarela, catupiry, cheddar, parmes√£o, or√©gano' },
        { codigo: 'T013', nome: 'Do Pizzaiolo (G)', preco: 39.00, desc: 'Molho de tomate, mussarela, calabresa, bacon, palmito, queijo provolone, milho, ovos' },
        { codigo: 'T014', nome: 'Favorita (G)', preco: 37.00, desc: 'Molho de tomate, calabresa, ovos, calabresa, palmito, azeitona' },
        { codigo: 'T015', nome: 'Frango c/ Catupiry (G)', preco: 35.00, desc: 'Molho de tomate, frango desfiado e catupiry' },
        { codigo: 'T016', nome: 'Frango c/ Cheddar (G)', preco: 35.00, desc: 'Molho de tomate, frango desfiado, cheddar' },
        { codigo: 'T017', nome: 'Frango c/ Mussarela (G)', preco: 36.00, desc: 'Molho de tomate, frango desfiado, mussarela' },
        { codigo: 'T018', nome: 'Italiana (G)', preco: 37.00, desc: 'Mussarela, salame italiano, molho de tomate' },
        { codigo: 'T019', nome: 'Marguerita (G)', preco: 36.00, desc: 'Molho de tomate, mussarela, parmes√£o, tomate e manjeric√£o' },
        { codigo: 'T020', nome: 'Mussarela (G)', preco: 36.00, desc: 'Molho de tomate, mussarela, tomate, or√©gano' },
        { codigo: 'T021', nome: 'Mussa Palha (G)', preco: 36.00, desc: 'Molho de tomate, mussarela, tomate, batata palha' },
        { codigo: 'T022', nome: 'Napolitana (G)', preco: 36.00, desc: 'Molho de tomate, mussarela, parmes√£o, presunto, tomate, or√©gano' },
        { codigo: 'T023', nome: 'Palmito (G)', preco: 37.00, desc: 'Presunto, palmito, mussarela, or√©gano' },
        { codigo: 'T024', nome: 'Paulista (G)', preco: 37.00, desc: 'Molho de tomate, mussarela, presunto, palmito, bacon, tomate' },
        { codigo: 'T025', nome: 'Pepperoni (G)', preco: 35.00, desc: 'Molho de tomate, mussarela, salame, pepperoni, or√©gano' },
        { codigo: 'T026', nome: 'Portuguesa (G)', preco: 36.00, desc: 'Molho de tomate, mussarela, presunto, ovos, cebola, or√©gano' },
        { codigo: 'T027', nome: 'Salame (G)', preco: 35.00, desc: 'Molho de tomate, mussarela, tomate, salame, azeitona' },
        { codigo: 'T028', nome: 'Toscana (G)', preco: 36.00, desc: 'Molho de tomate, calabresa, mussarela' },
        { codigo: 'T029', nome: 'Vegetariana (G)', preco: 36.00, desc: 'Molho de tomate, mussarela, palmito, azeitona, cebola, tomate' },
        { codigo: 'T030', nome: 'Vegetariana 3 Queijos (G)', preco: 40.00, desc: 'Molho de tomate, mussarela, catupiry, cheddar, parmes√£o' }
      ],
      'Doces': [
        { codigo: 'D001', nome: 'Prest√≠gio (G)', preco: 36.00, desc: 'Chocolate, coco ralado' },
        { codigo: 'D002', nome: 'Morango (G)', preco: 36.00, desc: 'Chocolate, morango, leite condensado' },
        { codigo: 'D003', nome: 'Romeu e Julieta (G)', preco: 36.00, desc: 'Queijo mussarela, goiabada' },
        { codigo: 'D004', nome: 'Brigadeiro (G)', preco: 36.00, desc: 'Chocolate, granulado' },
        { codigo: 'D005', nome: 'Cartola (G)', preco: 36.00, desc: 'Leite condensado, banana, canela, a√ß√∫car' }
      ],
      'Premium Doces': [
        { codigo: 'DP001', nome: 'Banana Nevada (G)', preco: 50.00, desc: 'Creme de leite, banana, chocolate branco, canela, a√ß√∫car' },
        { codigo: 'DP002', nome: 'Kit Kat (G)', preco: 45.00, desc: 'Creme de leite, chocolate, kit kat' },
        { codigo: 'DP003', nome: 'M&M (G)', preco: 38.00, desc: 'Creme de leite, chocolate, M&M' },
        { codigo: 'DP004', nome: 'Chocobom (G)', preco: 45.00, desc: 'Creme de leite, chocolate, bombom' },
        { codigo: 'DP005', nome: '√ìreo (G)', preco: 45.00, desc: 'Creme de leite, chocolate branco, mini √≥reo' },
        { codigo: 'DP006', nome: 'Contempla√ß√£o (G)', preco: 45.00, desc: 'Creme de leite, chocolate, morango, banana, coco ralado, leite condensado' },
        { codigo: 'DP007', nome: 'Formigueiro em Chocolate Branco (G)', preco: 45.00, desc: 'Creme de leite, chocolate branco, brigadeiro' },
        { codigo: 'DP008', nome: 'Pizza Sorvete (G)', preco: 45.00, desc: 'Creme de leite, chocolate, sorvete' }
      ],
      'Premium Salgadas': [
        { codigo: 'PR001', nome: 'A Moda Lamundo dos Sabores (G)', preco: 53.00, desc: 'Mussarela, molho lombo, cream cheese, milho, barbecue, or√©gano, bacon' },
        { codigo: 'PR002', nome: 'Bacon 4 Queijos (G)', preco: 45.00, desc: 'Molho, mussarela, bacon, cheddar, catupiry, parmes√£o, or√©gano' },
        { codigo: 'PR003', nome: 'Super Portuguesa (G)', preco: 55.00, desc: 'Mussarela, molho, presunto, milho, ovo, tomate, cebola, piment√£o, catupiry, bacon, or√©gano' },
        { codigo: 'PR004', nome: 'Calabresa Cheese (G)', preco: 40.00, desc: 'Mussarela, molho, cebola, cream cheese' },
        { codigo: 'PR005', nome: 'Tropical ‚Äì 5 Queijos (G)', preco: 43.00, desc: 'Mussarela, molho, cheddar, catupiry, cream cheese, parmes√£o' },
        { codigo: 'PR006', nome: 'Camar√£o Cheese (G)', preco: 60.00, desc: 'Molho de tomate, or√©gano, camar√£o, mussarela, cream cheese' },
        { codigo: 'PR007', nome: 'O Reino de Frango (G)', preco: 44.00, desc: 'Mussarela, molho, frango desfiado, cebolinha verde, cream cheese, or√©gano' },
        { codigo: 'PR008', nome: 'Lombo Creme Cheese (G)', preco: 45.00, desc: 'Mussarela, molho, or√©gano, lombo, cream cheese, azeitona, cebola' },
        { codigo: 'PR009', nome: 'Frango 4 Queijos (G)', preco: 42.00, desc: 'Mussarela, molho, frango desfiado, catupiry, queijo parmes√£o, cheddar, or√©gano' },
        { codigo: 'PR010', nome: 'Super Fritas (G)', preco: 45.00, desc: 'Mussarela, molho, batata frita' },
        { codigo: 'PR011', nome: 'Camar√£o (G)', preco: 55.00, desc: 'Molho de tomate, mussarela, or√©gano, camar√£o' },
        { codigo: 'PR012', nome: 'Lombo Especial (G)', preco: 50.00, desc: 'Mussarela, molho, ovo, cream cheese, lombo, cebola, or√©gano, barbecue' },
        { codigo: 'PR013', nome: 'Do Neves para o Mundo (G)', preco: 50.00, desc: 'Molho de tomate, mussarela, calabresa, cream cheese, tomate, cebola, ovo, barbecue, or√©gano' },
        { codigo: 'PR014', nome: 'Primavera (G)', preco: 38.00, desc: 'Mussarela, palmito, milho, ervilha, batata palha, or√©gano' },
        { codigo: 'PR015', nome: 'Frango Bacon c/ Cheddar (G)', preco: 43.00, desc: 'Mussarela, molho, frango desfiado, bacon, cheddar, or√©gano' },
        { codigo: 'PR016', nome: 'Lombo a Moda (G)', preco: 42.00, desc: 'Lombo, molho, cebola, molho, or√©gano, barbecue' },
        { codigo: 'PR017', nome: 'Churrasco Gratinado (G)', preco: 50.00, desc: 'Mussarela, calabresa, cream cheese, molho, barbecue, cebolinha verde, cebola, azeitona, or√©gano' },
        { codigo: 'PR018', nome: 'Super Frango (G)', preco: 44.00, desc: 'Mussarela, frango desfiado, bacon, ovo, milho, cheddar, catupiry, or√©gano' },
        { codigo: 'PR019', nome: 'Filad√©lfia (G)', preco: 44.00, desc: 'Mussarela, ovo, frango, barbecue, tomate, molho, cebola' },
        { codigo: 'PR020', nome: 'Nordestina (G)', preco: 45.00, desc: 'Mussarela, molho, charque, catupiry, cheddar, milho, ervilha, cebola, tomate' }
      ]
    };

    // Pizzas Pequenas (separadas por subcategorias)
    const pizzasPequenas = {
      'Tradicionais': [
        { codigo: 'P001', nome: 'A Moda do Chefe (P)', preco: 25.00, desc: 'Frango desfiado, palmito, ovos, bacon, catupiry' },
        { codigo: 'P002', nome: 'Atum (P)', preco: 25.00, desc: 'Atum, mussarela, cebola, or√©gano' },
        { codigo: 'P003', nome: 'Bacon (P)', preco: 25.00, desc: 'Molho de tomate, mussarela, bacon, ovos, tomate' },
        { codigo: 'P004', nome: 'Baiana (P)', preco: 25.00, desc: 'Molho de tomate, calabresa, ovos, cebola, mussarela, pimenta' },
        { codigo: 'P005', nome: 'Brasileira Pizza (P)', preco: 25.00, desc: 'Mussarela, presunto, milho, ervilha, tomate' },
        { codigo: 'P006', nome: 'Calabresa (P)', preco: 25.00, desc: 'Molho de tomate, calabresa, cebola' },
        { codigo: 'P007', nome: 'Calabresa 3 Queijos (P)', preco: 25.00, desc: 'Molho de tomate, calabresa, mussarela, catupiry, cheddar' },
        { codigo: 'P008', nome: 'Caipira (P)', preco: 25.00, desc: 'Molho de tomate, mussarela, frango desfiado, cebola, milho, tomate, bacon' },
        { codigo: 'P009', nome: 'Charque (P)', preco: 26.00, desc: 'Molho de tomate, mussarela, charque, tomate, azeitona' },
        { codigo: 'P010', nome: 'Dois Queijos (P)', preco: 25.00, desc: 'Molho de tomate, mussarela, catupiry' },
        { codigo: 'P011', nome: 'Tr√™s Queijos (P)', preco: 25.00, desc: 'Molho de tomate, mussarela, catupiry, parmes√£o' },
        { codigo: 'P012', nome: 'Quatro Queijos (P)', preco: 25.00, desc: 'Molho de tomate, mussarela, catupiry, cheddar, parmes√£o, or√©gano' },
        { codigo: 'P013', nome: 'Do Pizzaiolo (P)', preco: 25.00, desc: 'Molho de tomate, mussarela, calabresa, bacon, palmito, queijo provolone, milho, ovos' },
        { codigo: 'P014', nome: 'Favorita (P)', preco: 25.00, desc: 'Molho de tomate, calabresa, ovos, calabresa, palmito, azeitona' },
        { codigo: 'P015', nome: 'Frango c/ Catupiry (P)', preco: 25.00, desc: 'Molho de tomate, frango desfiado e catupiry' },
        { codigo: 'P016', nome: 'Frango c/ Cheddar (P)', preco: 25.00, desc: 'Molho de tomate, frango desfiado, cheddar' },
        { codigo: 'P017', nome: 'Frango c/ Mussarela (P)', preco: 25.00, desc: 'Molho de tomate, frango desfiado, mussarela' },
        { codigo: 'P018', nome: 'Italiana (P)', preco: 25.00, desc: 'Mussarela, salame italiano, molho de tomate' },
        { codigo: 'P019', nome: 'Marguerita (P)', preco: 25.00, desc: 'Molho de tomate, mussarela, parmes√£o, tomate e manjeric√£o' },
        { codigo: 'P020', nome: 'Mussarela (P)', preco: 25.00, desc: 'Molho de tomate, mussarela, tomate, or√©gano' },
        { codigo: 'P021', nome: 'Mussa Palha (P)', preco: 25.00, desc: 'Molho de tomate, mussarela, tomate, batata palha' },
        { codigo: 'P022', nome: 'Napolitana (P)', preco: 25.00, desc: 'Molho de tomate, mussarela, parmes√£o, presunto, tomate, or√©gano' },
        { codigo: 'P023', nome: 'Palmito (P)', preco: 25.00, desc: 'Presunto, palmito, mussarela, or√©gano' },
        { codigo: 'P024', nome: 'Paulista (P)', preco: 25.00, desc: 'Molho de tomate, mussarela, presunto, palmito, bacon, tomate' },
        { codigo: 'P025', nome: 'Pepperoni (P)', preco: 25.00, desc: 'Molho de tomate, mussarela, salame, pepperoni, or√©gano' },
        { codigo: 'P026', nome: 'Portuguesa (P)', preco: 25.00, desc: 'Molho de tomate, mussarela, presunto, ovos, cebola, or√©gano' },
        { codigo: 'P027', nome: 'Salame (P)', preco: 25.00, desc: 'Molho de tomate, mussarela, tomate, salame, azeitona' },
        { codigo: 'P028', nome: 'Toscana (P)', preco: 25.00, desc: 'Molho de tomate, calabresa, mussarela' },
        { codigo: 'P029', nome: 'Vegetariana (P)', preco: 25.00, desc: 'Molho de tomate, mussarela, palmito, azeitona, cebola, tomate' },
        { codigo: 'P030', nome: 'Vegetariana 3 Queijos (P)', preco: 25.00, desc: 'Molho de tomate, mussarela, catupiry, cheddar, parmes√£o' }
      ],
      'Doces': [
        { codigo: 'DP001', nome: 'Prest√≠gio (P)', preco: 25.00, desc: 'Chocolate, coco ralado' },
        { codigo: 'DP002', nome: 'Morango (P)', preco: 25.00, desc: 'Chocolate, morango, leite condensado' },
        { codigo: 'DP003', nome: 'Romeu e Julieta (P)', preco: 25.00, desc: 'Queijo mussarela, goiabada' },
        { codigo: 'DP004', nome: 'Brigadeiro (P)', preco: 25.00, desc: 'Chocolate, granulado' },
        { codigo: 'DP005', nome: 'Cartola (P)', preco: 25.00, desc: 'Leite condensado, banana, canela, a√ß√∫car' }
      ],
      'Premium Doces': [
        { codigo: 'DPP001', nome: 'Banana Nevada (P)', preco: 50.00, desc: 'Creme de leite, banana, chocolate branco, canela, a√ß√∫car' },
        { codigo: 'DPP002', nome: 'Kit Kat (P)', preco: 45.00, desc: 'Creme de leite, chocolate, kit kat' },
        { codigo: 'DPP003', nome: 'M&M (P)', preco: 38.00, desc: 'Creme de leite, chocolate, M&M' },
        { codigo: 'DPP004', nome: 'Chocobom (P)', preco: 45.00, desc: 'Creme de leite, chocolate, bombom' },
        { codigo: 'DPP005', nome: '√ìreo (P)', preco: 45.00, desc: 'Creme de leite, chocolate branco, mini √≥reo' },
        { codigo: 'DPP006', nome: 'Contempla√ß√£o (P)', preco: 45.00, desc: 'Creme de leite, chocolate, morango, banana, coco ralado, leite condensado' },
        { codigo: 'DPP007', nome: 'Formigueiro em Chocolate Branco (P)', preco: 45.00, desc: 'Creme de leite, chocolate branco, brigadeiro' },
        { codigo: 'DPP008', nome: 'Pizza Sorvete (P)', preco: 45.00, desc: 'Creme de leite, chocolate, sorvete' }
      ],
      'Premium Salgadas': [
        { codigo: 'PP001', nome: 'A Moda Lamundo dos Sabores (P)', preco: 53.00, desc: 'Mussarela, molho lombo, cream cheese, milho, barbecue, or√©gano, bacon' },
        { codigo: 'PP002', nome: 'Bacon 4 Queijos (P)', preco: 45.00, desc: 'Molho, mussarela, bacon, cheddar, catupiry, parmes√£o, or√©gano' },
        { codigo: 'PP003', nome: 'Super Portuguesa (P)', preco: 55.00, desc: 'Mussarela, molho, presunto, milho, ovo, tomate, cebola, piment√£o, catupiry, bacon, or√©gano' },
        { codigo: 'PP004', nome: 'Calabresa Cheese (P)', preco: 40.00, desc: 'Mussarela, molho, cebola, cream cheese' },
        { codigo: 'PP005', nome: 'Tropical ‚Äì 5 Queijos (P)', preco: 43.00, desc: 'Mussarela, molho, cheddar, catupiry, cream cheese, parmes√£o' },
        { codigo: 'PP006', nome: 'Camar√£o Cheese (P)', preco: 60.00, desc: 'Molho de tomate, or√©gano, camar√£o, mussarela, cream cheese' },
        { codigo: 'PP007', nome: 'O Reino de Frango (P)', preco: 44.00, desc: 'Mussarela, molho, frango desfiado, cebolinha verde, cream cheese, or√©gano' },
        { codigo: 'PP008', nome: 'Lombo Creme Cheese (P)', preco: 45.00, desc: 'Mussarela, molho, or√©gano, lombo, cream cheese, azeitona, cebola' },
        { codigo: 'PP009', nome: 'Frango 4 Queijos (P)', preco: 42.00, desc: 'Mussarela, molho, frango desfiado, catupiry, queijo parmes√£o, cheddar, or√©gano' },
        { codigo: 'PP010', nome: 'Super Fritas (P)', preco: 45.00, desc: 'Mussarela, molho, batata frita' },
        { codigo: 'PP011', nome: 'Camar√£o (P)', preco: 55.00, desc: 'Molho de tomate, mussarela, or√©gano, camar√£o' },
        { codigo: 'PP012', nome: 'Lombo Especial (P)', preco: 50.00, desc: 'Mussarela, molho, ovo, cream cheese, lombo, cebola, or√©gano, barbecue' },
        { codigo: 'PP013', nome: 'Do Neves para o Mundo (P)', preco: 50.00, desc: 'Molho de tomate, mussarela, calabresa, cream cheese, tomate, cebola, ovo, barbecue, or√©gano' },
        { codigo: 'PP014', nome: 'Primavera (P)', preco: 38.00, desc: 'Mussarela, palmito, milho, ervilha, batata palha, or√©gano' },
        { codigo: 'PP015', nome: 'Frango Bacon c/ Cheddar (P)', preco: 43.00, desc: 'Mussarela, molho, frango desfiado, bacon, cheddar, or√©gano' },
        { codigo: 'PP016', nome: 'Lombo a Moda (P)', preco: 42.00, desc: 'Lombo, molho, cebola, molho, or√©gano, barbecue' },
        { codigo: 'PP017', nome: 'Churrasco Gratinado (P)', preco: 50.00, desc: 'Mussarela, calabresa, cream cheese, molho, barbecue, cebolinha verde, cebola, azeitona, or√©gano' },
        { codigo: 'PP018', nome: 'Super Frango (P)', preco: 44.00, desc: 'Mussarela, frango desfiado, bacon, ovo, milho, cheddar, catupiry, or√©gano' },
        { codigo: 'PP019', nome: 'Filad√©lfia (P)', preco: 44.00, desc: 'Mussarela, ovo, frango, barbecue, tomate, molho, cebola' },
        { codigo: 'PP020', nome: 'Nordestina (P)', preco: 45.00, desc: 'Mussarela, molho, charque, catupiry, cheddar, milho, ervilha, cebola, tomate' }
      ]
    };

    // Outras categorias
    const produtosOutros = {
      'Hamb√∫rgueres': [
        { codigo: 'H001', nome: 'Classic Burger', preco: 13.99, desc: 'Carne artesanal, queijo cheddar, alface, tomate, cebola e molho especial' },
        { codigo: 'H002', nome: 'Bacon Burger', preco: 17.00, desc: 'Carne artesanal, bacon crocante, queijo cheddar, cebola, tomate, alface, molhos da casa' },
        { codigo: 'H003', nome: 'Ssmash Duplo', preco: 20.00, desc: '2 carnes artesanais, salada, milho, ervilha, queijo mussarela, molhos da casa' },
        { codigo: 'H004', nome: 'Mexicano', preco: 19.00, desc: 'Carne artesanal, salada, bacon, cheddar, ovo, batata palha, molhos da casa' },
        { codigo: 'H005', nome: 'X-Tud√£o', preco: 35.00, desc: 'Carne artesanal, frango desfiado, ovo, presunto, mussarela, calabresa, batata palha, bacon, molhos da casa' },
        { codigo: 'H006', nome: 'Churrasco Bresa', preco: 19.00, desc: 'Carne artesanal, ovo, calabresa, batata palha, molhos da casa' },
        { codigo: 'H007', nome: 'Salsich√£o Burger', preco: 14.00, desc: 'Carne artesanal, salsicha, ovo, salada, molhos da casa' },
        { codigo: 'H008', nome: 'Triplo do Cheff', preco: 33.00, desc: '3 carnes artesanais, bacon, ovo, salada, molhos da casa' }
      ],
      'Past√©is': [
        { codigo: 'PA001', nome: 'Frango Catupiry', preco: 6.00, desc: 'Pastel de frango com catupiry' },
        { codigo: 'PA002', nome: 'Frango Cheddar', preco: 6.00, desc: 'Pastel de frango com cheddar' },
        { codigo: 'PA003', nome: 'Calabresa', preco: 6.00, desc: 'Pastel de calabresa' },
        { codigo: 'PA004', nome: 'Presunto', preco: 6.00, desc: 'Pastel de presunto' },
        { codigo: 'PA005', nome: 'Mussarela', preco: 6.00, desc: 'Pastel de mussarela' },
        { codigo: 'PA006', nome: '4 Sabores', preco: 8.00, desc: 'Frango Catupiry, Frango Cheddar, Mussarela, 4 Queijos, Presunto, Milho e Ervilha, Cebola e Tomate' }
      ],
      'Esfirras': [
        { codigo: 'EF01', nome: 'Esfirra de Carne', preco: 5.00, desc: 'Esfirra recheada com carne mo√≠da' },
        { codigo: 'EF02', nome: 'Esfirra de Frango', preco: 6.00, desc: 'Esfirra recheada com frango desfiado' }
      ],
      'A√ßa√≠': [
        { codigo: 'AC01', nome: 'A√ßa√≠ 300ml', preco: 12.00, desc: 'A√ßa√≠ puro com acompanhamentos a escolher' },
        { codigo: 'AC02', nome: 'A√ßa√≠ 500ml', preco: 18.00, desc: 'A√ßa√≠ puro com acompanhamentos a escolher' }
      ],
      'Gelados': [
        { codigo: 'GL01', nome: 'Sorvete Casquinha', preco: 5.00, desc: 'Casquinha crocante de baunilha' },
        { codigo: 'GL02', nome: 'Milkshake 400ml', preco: 10.00, desc: 'Milkshake de chocolate ou morango' }
      ],
      'Refrigerantes': [
        { codigo: 'RF01', nome: 'Coca-Cola Lata', preco: 5.00, desc: '350ml' },
        { codigo: 'RF02', nome: 'Guaran√° Antarctica Lata', preco: 5.00, desc: '350ml' }
      ],
      'Batata Frita': [
        { codigo: 'BT01', nome: 'Batata Cheddar e Bacon', preco: 15.00, desc: 'Fritas com cheddar e bacon crocante' },
        { codigo: 'BT02', nome: 'Batata Temperada', preco: 12.00, desc: 'Fritas com toque de especiarias' }
      ]
    };

    // Quando clica em "Pizzas Grandes" ou "Pizzas Pequenas"
    function mostrarSubcategorias(categoria) {
      document.getElementById('tituloSubcategoria').innerText = categoria + ' - Subcategorias';

      if (categoria === 'Pizzas Grandes') {
        tipoPizzaAtual = 'grande';
      } else {
        tipoPizzaAtual = 'pequena';
      }

      mostrarTela('subcategorias');
    }

    // Quando escolhe a subcategoria (Salgadas, Doces, etc.)
    function mostrarProdutosPizzas(subcat) {
      subcategoriaAtual = subcat;
      document.getElementById('tituloCategoria').innerText = 'Pizzas ' + subcat;
      document.getElementById('busca').value = '';
      atualizarListaProdutos();
      mostrarTela('produtos');
    }

    // Quando escolhe categorias que n√£o s√£o pizza
    function mostrarProdutosGenerico(cat) {
      tipoPizzaAtual = 'outros';
      subcategoriaAtual = cat;
      document.getElementById('tituloCategoria').innerText = cat;
      document.getElementById('busca').value = '';
      atualizarListaProdutos();
      mostrarTela('produtos');
    }

    // Campo de busca
    function filtrarProdutos() {
      atualizarListaProdutos();
    }

    // Renderiza a lista de produtos
    function atualizarListaProdutos() {
      const busca = document.getElementById('busca').value.toLowerCase().trim();
      const lista = document.getElementById('listaProdutos');
      lista.innerHTML = '';

      let listaSubcat = [];

      if (tipoPizzaAtual === 'grande') {
        // Buscamos em pizzasGrandes
        listaSubcat = pizzasGrandes[subcategoriaAtual] || [];
      }
      else if (tipoPizzaAtual === 'pequena') {
        // Buscamos em pizzasPequenas
        listaSubcat = pizzasPequenas[subcategoriaAtual] || [];
      }
      else {
        // Categorias diversas
        listaSubcat = produtosOutros[subcategoriaAtual] || [];
      }

      if (busca !== '') {
        const matched = [];
        const others = [];
        listaSubcat.forEach(prod => {
          const nomeLower = prod.nome.toLowerCase();
          if (nomeLower.includes(busca)) matched.push(prod);
          else others.push(prod);
        });
        listaSubcat = [...matched, ...others];
      }

      listaSubcat.forEach(prod => {
        const item = document.createElement('div');
        item.classList.add('produto');
        item.innerHTML = `
          <h3>${prod.codigo} ${prod.nome} <span class="preco">R$ ${prod.preco.toFixed(2)}</span></h3>
          <p>${prod.desc}</p>
        `;
        item.onclick = () => produtoClicado(prod);
        lista.appendChild(item);
      });
    }

    function produtoClicado(prod) {
      // Verifica se √© pizza (subcategoria nas 4 subcats de pizza) ou item gen√©rico
      const pizzaCats = ['Tradicionais','Doces','Premium Doces','Premium Salgadas'];
      if (pizzaCats.includes(subcategoriaAtual)) {
        // √â pizza
        if (isSelecionandoSegundaMetade) {
          montarMeioAMeio(primeiraMetade, prod);
        } else {
          mostrarDetalhesPizza(prod);
        }
      } else {
        // √â item gen√©rico
        mostrarDetalhesGenerico(prod);
      }
    }

    function mostrarDetalhesPizza(prod) {
      produtoSelecionado = prod;
      quantidadeSelecionada = 1;
      precoBase = prod.preco;

      document.getElementById('detalhesTitulo').innerText = `${prod.codigo} ${prod.nome}`;
      document.getElementById('detalhesDescricao').innerText = prod.desc;
      document.getElementById('quantidadeValor').innerText = '1';
      document.getElementById('observacao').value = '';

      // Mostra op√ß√µes (inteira / meio a meio)
      document.querySelector('.opcoes').style.display = 'block';
      const radios = document.getElementsByName('opcaoPizza');
      radios.forEach(r => r.checked = (r.value === 'Inteira'));

      isSelecionandoSegundaMetade = false;
      primeiraMetade = null;

      atualizarTotal();
      document.getElementById('botaoAcao').textContent = 'Adicionar ao Pedido';
      mostrarTela('detalhes');
    }

    function mostrarDetalhesGenerico(prod) {
      produtoSelecionado = prod;
      quantidadeSelecionada = 1;
      precoBase = prod.preco;

      document.getElementById('detalhesTitulo').innerText = `${prod.codigo} ${prod.nome}`;
      document.getElementById('detalhesDescricao').innerText = prod.desc;
      document.getElementById('quantidadeValor').innerText = '1';
      document.getElementById('observacao').value = '';

      document.querySelector('.opcoes').style.display = 'none';

      atualizarTotal();
      document.getElementById('botaoAcao').textContent = 'Adicionar ao Pedido';
      mostrarTela('detalhes');
    }

    function alterarQuantidade(v) {
      quantidadeSelecionada += v;
      if (quantidadeSelecionada < 1) quantidadeSelecionada = 1;
      document.getElementById('quantidadeValor').innerText = quantidadeSelecionada;
      atualizarTotal();
    }

    function mudarTipoPizza() {
      const radios = document.getElementsByName('opcaoPizza');
      let tipo = 'Inteira';
      radios.forEach(r => {
        if (r.checked) tipo = r.value;
      });

      if (tipo === 'Meio a Meio' && !produtoSelecionado.codigo.includes('+')) {
        document.getElementById('botaoAcao').textContent = 'Escolher outra metade';
      } else {
        document.getElementById('botaoAcao').textContent = 'Adicionar ao Pedido';
      }
      atualizarTotal();
    }

    function atualizarTotal() {
      const total = precoBase * quantidadeSelecionada;
      document.getElementById('precoTotal').innerText = `Total: R$ ${total.toFixed(2)}`;
    }

    function acaoDetalhes() {
      const pizzaCats = ['Tradicionais','Doces','Premium Doces','Premium Salgadas'];
      if (!pizzaCats.includes(subcategoriaAtual)) {
        // gen√©rico
        adicionarAoPedidoGenerico();
        return;
      }

      // pizza
      const radios = document.getElementsByName('opcaoPizza');
      let tipoPizza = 'Inteira';
      radios.forEach(r => {
        if (r.checked) tipoPizza = r.value;
      });

      if (tipoPizza === 'Meio a Meio' && !produtoSelecionado.codigo.includes('+')) {
        // Escolher a segunda metade
        primeiraMetade = produtoSelecionado;
        isSelecionandoSegundaMetade = true;
        mostrarTela('produtos');
      } else {
        adicionarAoPedidoPizza();
      }
    }

    // Montar pizza meio a meio => valor da mais cara
    function montarMeioAMeio(m1, m2) {
      const displayNome = `${m1.codigo} ${m1.nome} + ${m2.codigo} ${m2.nome}`;
      const valorMaisCara = Math.max(m1.preco, m2.preco);

      produtoSelecionado = {
        codigo: displayNome,
        nome: displayNome,
        preco: valorMaisCara,
        desc: `${m1.desc} | ${m2.desc}`
      };
      precoBase = valorMaisCara;

      mostrarTela('detalhes');
      document.getElementById('detalhesTitulo').innerText = produtoSelecionado.codigo;
      document.getElementById('detalhesDescricao').innerText = produtoSelecionado.desc;

      const radios = document.getElementsByName('opcaoPizza');
      radios.forEach(r => r.checked = (r.value === 'Meio a Meio'));

      atualizarTotal();
      isSelecionandoSegundaMetade = false;
      primeiraMetade = null;

      document.getElementById('botaoAcao').textContent = 'Adicionar ao Pedido';
    }

    function adicionarAoPedidoPizza() {
      const radios = document.getElementsByName('opcaoPizza');
      let tipoPizza = 'Inteira';
      radios.forEach(r => {
        if (r.checked) tipoPizza = r.value;
      });

      const obs = document.getElementById('observacao').value;
      const precoFinal = precoBase * quantidadeSelecionada;

      let nomeFinal;
      if (produtoSelecionado.codigo.includes('+')) {
        nomeFinal = produtoSelecionado.codigo; // meio a meio
      } else {
        nomeFinal = `${produtoSelecionado.codigo} ${produtoSelecionado.nome}`;
      }

      const itemPedido = {
        nome: nomeFinal,
        quantidade: quantidadeSelecionada,
        tipo: tipoPizza,
        observacao: obs,
        precoFinal: precoFinal
      };

      carrinho.push(itemPedido);
      mostrarTela('pedidos');
      atualizarListaPedidos();
    }

    function adicionarAoPedidoGenerico() {
      const obs = document.getElementById('observacao').value;
      const precoFinal = precoBase * quantidadeSelecionada;
      const nomeFinal = `${produtoSelecionado.codigo} ${produtoSelecionado.nome}`;

      const itemPedido = {
        nome: nomeFinal,
        quantidade: quantidadeSelecionada,
        tipo: 'Normal',
        observacao: obs,
        precoFinal: precoFinal
      };

      carrinho.push(itemPedido);
      mostrarTela('pedidos');
      atualizarListaPedidos();
    }
    function removerPedido(index) {
      if (confirm("Tem certeza que deseja remover este item do pedido?")) {
        carrinho.splice(index, 1);
        atualizarListaPedidos();
      }
    }
    function atualizarListaPedidos() {
      const container = document.getElementById('listaPedidos');
      container.innerHTML = '';

      verificarEnvioHabilitado();

      if (carrinho.length === 0) {
        container.innerHTML = '<p>Nenhum pedido at√© agora.</p>';
        document.getElementById('pedidoTotal').innerText = '';
        return;
      }

      let somaTotal = 0;
      carrinho.forEach((item, index) => {
        somaTotal += item.precoFinal;

        const div = document.createElement('div');
        div.classList.add('pedido-item');

        div.innerHTML = `
          <div style="display: flex; justify-content: space-between; align-items: flex-start;">
            <div style="flex: 1;">
              <h4>(${index + 1}) ${item.nome}</h4>
              <p>Quantidade: ${item.quantidade}</p>
              <p>Tipo: ${item.tipo}</p>
              ${item.observacao ? `<p>Obs: ${item.observacao}</p>` : ''}
              <p>Total: R$ ${item.precoFinal.toFixed(2)}</p>
            </div>
            <div style="margin-left: 10px;">
              <button onclick="removerPedido(${index})" style="background-color: #ffee00; color: #000; border: none; border-radius: 8px; padding: 8px 10px; font-size: 1em; cursor: pointer;">üóëÔ∏è</button>
            </div>
          </div>
        `;

        container.appendChild(div);
      });

      document.getElementById('pedidoTotal').innerText = `Valor Total: R$ ${somaTotal.toFixed(2)}`;
      verificarEnvioHabilitado();
    }

    function adicionarMais() {
      mostrarTela('cardapio');
    }

    // Controle de entrega
    function atualizarEntrega() {
      const radios = document.getElementsByName('localEntrega');
      localEntrega = '';
      radios.forEach(r => {
        if (r.checked) localEntrega = r.value;
      });

      enderecoEntrega = document.getElementById('enderecoEntrega').value.trim();
      verificarEnvioHabilitado();
    }

    function verificarEnvioHabilitado() {
      const botaoEnviar = document.getElementById('botaoEnviar');
      // Habilita se houver itens e endere√ßo n√£o vazio
      if (carrinho.length > 0 && enderecoEntrega !== '') {
        botaoEnviar.disabled = false;
      } else {
        botaoEnviar.disabled = true;
      }
    }

    function enviarPedido() {
      if (carrinho.length === 0) {
        alert('Nenhum pedido para enviar.');
        return;
      }
      if (!enderecoEntrega) {
        alert('Digite o local de entrega.');
        return;
      }

      let mensagem = "*Ol√°, gostaria de fazer o seguinte pedido:*\n\n";
      mensagem += "*Itens do Pedido:*\n";
      let valorTotal = 0;

      carrinho.forEach((item, index) => {
        mensagem += `*(${index+1}) ${item.nome} - ${item.tipo}*\n`;
        mensagem += `Quantidade: ${item.quantidade}\n`;
        mensagem += `Total: R$ ${item.precoFinal.toFixed(2)}\n`;
        if (item.observacao) {
          mensagem += `Observa√ß√£o: ${item.observacao}\n`;
        }
        mensagem += "\n";
        valorTotal += item.precoFinal;
      });

      mensagem += `*Valor Total:* R$ ${valorTotal.toFixed(2)}\n\n`;
      mensagem += `*Endere√ßo:* ${localEntrega}\n`;
      mensagem += `*Local:* ${enderecoEntrega}\n\n`;
      mensagem += "*Obrigado!*";

      const telefoneWhatsApp = '5587920008169'; // Ajuste para o seu n√∫mero
      const textoEncoded = encodeURIComponent(mensagem);
      const url = `https://wa.me/${telefoneWhatsApp}?text=${textoEncoded}`;
      window.open(url, '_blank');
    }
  </script>
</body>
</html>
